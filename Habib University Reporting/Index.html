<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Habib University Portal</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
    * { box-sizing: border-box; font-family: "Segoe UI", Arial, sans-serif; }
    body { margin: 0; background: #f4f3f8; color: #333; }
    header { background: #4C216D; color: #fff; padding: 14px 20px; font-size: 18px; font-weight: 600; text-align:center; }
    .hidden { display: none; }

    /* Login & navigation */
    .login-box, .nav-box, .search-box { max-width: 400px; margin: 80px auto; background: #fff; padding: 30px; border-radius: 8px; box-shadow: 0 2px 6px rgba(0,0,0,0.15); text-align:center; }
    .login-box input, .search-box input { width: 100%; padding: 10px; margin: 8px 0; border-radius: 4px; border: 1px solid #ccc; font-size: 14px; }
    .login-box button, .nav-box button, .search-box button { background: #4C216D; color:#fff; border:none; padding:10px 16px; border-radius:4px; cursor:pointer; font-size:14px; margin-top:10px; }
    .login-box button:hover, .nav-box button:hover, .search-box button:hover { background:#6f42c1; }

    /* Layout */
    .layout { display: grid; grid-template-columns: 320px 1fr; height: calc(100vh - 52px); }

    /* Sidebar */
    .sidebar { background: #fff; border-right: 1px solid #ddd; padding: 16px; overflow-y: auto; }
    .photo-box { border: 2px solid #4C216D; border-radius: 6px; padding: 10px; text-align: center; margin-bottom: 16px; }
    .photo-box img { width: 100%; border-radius: 4px; }
    .student-name { margin-top: 8px; font-weight: 600; font-size: 16px; color: #4C216D; }
    .student-meta { font-size: 13px; color: #555; }

    /* Accordion */
    .nav-header { background: #ede7f6; padding: 8px 10px; margin-top: 8px; font-size: 14px; font-weight: 600; color: #4C216D; border-radius: 4px; cursor: pointer; }
    .nav-items { display: none; padding-left: 12px; margin-top: 4px; }
    .nav-items div { padding: 6px 8px; font-size: 13px; cursor: pointer; border-radius: 4px; }
    .nav-items div:hover { background: #f3effb; }

    /* Main content */
    .content { padding: 20px; overflow-y: auto; }
    .card { background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 2px 6px rgba(0,0,0,0.08); margin-bottom: 20px; }
    .card h3 { margin-top: 0; color: #4C216D; border-bottom: 1px solid #ddd; padding-bottom: 8px; }

    /* GPA Bars */
    .bar { margin-bottom: 10px; }
    .bar-label { font-size: 13px; margin-bottom: 2px; }
    .bar-track { background: #e5dcf5; border-radius: 4px; overflow: hidden; }
    .bar-fill { height: 18px; background: #4C216D; color: #fff; font-size: 12px; text-align: right; padding-right: 6px; line-height: 18px; }

    /* Dashboard grid */
    .dashboard-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap:20px; margin-top:15px; }

    /* Tables */
    table { width: 100%; border-collapse: collapse; font-family: Arial, sans-serif; }
    th, td { padding: 8px; border-bottom: 1px solid #ddd; }
    th { background-color: #f0f0f0; text-align: left; }
</style>
</head>

<body>
<header>Habib University Portal</header>

<!-- Login Screen -->
<div class="login-box" id="loginScreen">
    <h3>Login</h3>
    <input type="text" id="username" placeholder="Username">
    <input type="password" id="password" placeholder="Password">
    <button onclick="login()">Login</button>
    <p id="loginError" style="color:red; display:none;">Incorrect username or password</p>
</div>

<!-- Navigation after login -->
<div class="nav-box hidden" id="navScreen">
    <h3>Welcome!</h3>
    <button onclick="goToStudentProfile()">Student Profile</button>
    <button onclick="alert('Aggregate Reports coming soon!')">Aggregate Reports</button>
</div>

<!-- Student search -->
<div class="search-box hidden" id="searchScreen">
    <h3>Search Student by ID</h3>
    <input type="text" id="studentId" placeholder="Enter Student ID">
    <button onclick="loadStudent()">Search</button>
    <p id="searchError" style="color:red; display:none;">Student not found</p>
</div>

<!-- Main layout / profile page -->
<div class="layout hidden" id="profileScreen">

    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="photo-box">
            <img src="Jazzel-Mehmood-scaled.jpg" alt="Student Photo">
            <div class="student-name">Muhammad Jazzel Mehmood</div>
            <div class="student-meta">Student ID: 06886</div>
            <div class="student-meta">BS Computer Engineering</div>
            <div class="student-meta">Current cGPA: 3.46</div>
            <div class="student-meta">Current Status: Matriculated</div>
            <div class="student-meta">Board: Intermediate</div>
            <div class="student-meta">School: Adamjee Government Science College</div>
        </div>

        <div class="nav-header" onclick="toggle(this)">Academic Performance</div>
        <div class="nav-items">
            <div onclick="load('gpa')">GPA History</div>
        </div>

        <div class="nav-header" onclick="toggle(this)">Enrollment Records</div>
        <div class="nav-items">
            <div onclick="load('enrollment')">Term Enrollment</div>
        </div>
    </aside>

    <!-- Main content -->
    <main class="content">
        <div class="card" id="content">
            <h3>Student Overview</h3>
            <div class="dashboard-grid">
                <div class="card">
                    <strong>Courses this Semester</strong>
                    <ul id="current-courses" style="margin:8px 0; padding-left:18px; font-size:13px;"></ul>
                </div>
                <div class="card">
                    <strong>Total Courses Taken Per Semester</strong>
                    <canvas id="coursesPerSemester"></canvas>
                </div>
                <div class="card">
                    <strong>Total Credit Hours Per Semester</strong>
                    <canvas id="creditsPerSemester"></canvas>
                </div>
                <div class="card">
                    <strong>Clubs</strong>
                    <ul id="clubs-list" style="margin:8px 0; padding-left:18px; font-size:13px;"></ul>
                </div>
                <div class="card">
                    <strong>Student Services Usage</strong>
                    <canvas id="servicesUsage"></canvas>
                </div>
                <div class="card">
                    <strong>Habib Liberal Core Completion</strong>
                    <canvas id="liberalCore"></canvas>
                </div>
                <div class="card">
                    <strong>Required Courses Completion</strong>
                    <canvas id="requiredCourses"></canvas>
                </div>
                <div class="card">
                    <strong>Electives Completion</strong>
                    <canvas id="electives"></canvas>
                </div>
            </div>
        </div>
    </main>

</div>

<script>
function login() {
    const user = document.getElementById("username").value;
    const pass = document.getElementById("password").value;
    const error = document.getElementById("loginError");

    if(user==="Test" && pass==="Test") {
        document.getElementById("loginScreen").classList.add("hidden");
        document.getElementById("navScreen").classList.remove("hidden");
    } else {
        error.style.display="block";
    }
}

function goToStudentProfile() {
    document.getElementById("navScreen").classList.add("hidden");
    document.getElementById("searchScreen").classList.remove("hidden");
}

function loadStudent() {
    const id = document.getElementById("studentId").value;
    const error = document.getElementById("searchError");
    if(id==="06886") {
        document.getElementById("searchScreen").classList.add("hidden");
        document.getElementById("profileScreen").classList.remove("hidden");
        populateDashboard(); // load charts and lists
    } else {
        error.style.display="block";
    }
}

function toggle(el) {
    const items = el.nextElementSibling;
    items.style.display = items.style.display === "block" ? "none" : "block";
}

// Populate dashboard and charts
function populateDashboard() {
    const currentCourses = [
        {name:"Programming Fundamentals", section:"A1", type:"Core", instructor:"Dr. Ahmed Khan", attendance:95},
        {name:"Object-Oriented Programming", section:"B1", type:"Core", instructor:"Dr. Sara Iqbal", attendance:88},
        {name:"Linear Algebra", section:"C1", type:"Core", instructor:"Dr. Nida Hussain", attendance:92},
        {name:"Elective: AI Basics", section:"D1", type:"Elective", instructor:"Dr. Farah Siddiqui", attendance:85}
    ];
    const coursesList = document.getElementById("current-courses");
    currentCourses.forEach(c => {
        const li = document.createElement("li");
        li.textContent = `${c.name} (${c.section}) – ${c.type} – ${c.instructor} | Attendance: ${c.attendance}%`;
        coursesList.appendChild(li);
    });

    const clubs = ["Coding Club", "Robotics Society", "Debate Society"];
    const clubsList = document.getElementById("clubs-list");
    clubs.forEach(c => {
        const li = document.createElement("li");
        li.textContent = c;
        clubsList.appendChild(li);
    });

    const semesterLabels = ["Fall 2021","Spring 2022","Fall 2022","Spring 2023","Fall 2023","Spring 2024"];

    new Chart(document.getElementById("coursesPerSemester"), {
        type: 'bar',
        data: { labels: semesterLabels, datasets: [{ label:"Courses", data:[5,6,5,4,5,3], backgroundColor:"#4C216D" }]},
        options:{responsive:true, plugins:{legend:{display:false}}}
    });

    new Chart(document.getElementById("creditsPerSemester"), {
        type: 'bar',
        data: { labels: semesterLabels, datasets: [{ label:"Credit Hours", data:[15,18,16,14,17,12], backgroundColor:"#4C216D" }]},
        options:{responsive:true, plugins:{legend:{display:false}}}
    });

    new Chart(document.getElementById("servicesUsage"), {
        type: 'bar',
        data: { labels: ["Library","Advisor Visits","Counseling","Workshops"], datasets: [{ label:"Times Used", data:[12,5,2,8], backgroundColor:["#4C216D","#8c63ff","#b28cff","#d9bbff"] }]},
        options:{responsive:true, plugins:{legend:{display:false}}}
    });

    new Chart(document.getElementById("liberalCore"), {
        type:'pie',
        data:{labels:["Completed","Remaining"], datasets:[{data:[60,40], backgroundColor:["#4C216D","#e5dcf5"]}]},
        options:{responsive:true}
    });

    new Chart(document.getElementById("requiredCourses"), {
        type:'pie',
        data:{labels:["Completed","Remaining"], datasets:[{data:[80,20], backgroundColor:["#4C216D","#e5dcf5"]}]},
        options:{responsive:true}
    });

    new Chart(document.getElementById("electives"), {
        type:'pie',
        data:{labels:["Completed","Remaining"], datasets:[{data:[50,50], backgroundColor:["#4C216D","#e5dcf5"]}]},
        options:{responsive:true}
    });
}

// Load GPA or enrollment dynamically
function load(type) {
    const c = document.getElementById("content");

    if (type === "gpa") {
        c.innerHTML = `
            <h3>GPA History</h3>
            <div class="bar"><div class="bar-label">Fall 2021 – 3.1</div><div class="bar-track"><div class="bar-fill" style="width:62%">3.1</div></div></div>
            <div class="bar"><div class="bar-label">Spring 2022 – 3.4</div><div class="bar-track"><div class="bar-fill" style="width:68%">3.4</div></div></div>
            <div class="bar"><div class="bar-label">Fall 2022 – 3.6</div><div class="bar-track"><div class="bar-fill" style="width:72%">3.6</div></div></div>
            <div class="bar"><div class="bar-label">Spring 2023 – 3.5</div><div class="bar-track"><div class="bar-fill" style="width:70%">3.5</div></div></div>
            <div class="bar"><div class="bar-label">Fall 2023 – 3.7</div><div class="bar-track"><div class="bar-fill" style="width:74%">3.7</div></div></div>
            <div class="bar"><div class="bar-label">Spring 2024 – 3.8</div><div class="bar-track"><div class="bar-fill" style="width:76%">3.8</div></div></div>
        `;
    }

    if (type === "enrollment") {
        c.innerHTML = `
            <h3 style="color:#4C216D; margin-bottom:15px;">Enrollment Records – Computer Engineering</h3>
            <table>
                <thead>
                    <tr><th>Semester</th><th>Course</th><th>Grade</th><th>Instructor</th></tr>
                </thead>
                <tbody>
                    <tr><td>Fall 2021</td><td>Programming Fundamentals</td><td style="color:green;text-align:center;">A</td><td>Dr. Ahmed Khan</td></tr>
                    <tr><td>Fall 2021</td><td>Digital Logic Design</td><td style="color:orange;text-align:center;">B+</td><td>Dr. Usman Ali</td></tr>
                    <tr><td>Spring 2022</td><td>Object-Oriented Programming</td><td style="color:green;text-align:center;">A-</td><td>Dr. Sara Iqbal</td></tr>
                    <tr><td>Spring 2022</td><td>Data Structures & Algorithms</td><td style="color:green;text-align:center;">A</td><td>Dr. Farah Siddiqui</td></tr>
                    <tr><td>Spring 2022</td><td>Discrete Mathematics</td><td style="color:orange;text-align:center;">B+</td><td>Dr. Kamran Raza</td></tr>
                    <tr><td>Fall 2022</td><td>Linear Algebra</td><td style="color:green;text-align:center;">A-</td><td>Dr. Nida Hussain</td></tr>
                    <tr><td>Fall 2022</td><td>Circuit Analysis</td><td style="color:orange;text-align:center;">B+</td><td>Dr. Salman Qureshi</td></tr>
                    <tr><td>Fall 2022</td><td>Electronic Devices & Circuits</td><td style="color:green;text-align:center;">A</td><td>Dr. Hina Malik</td></tr>
                    <tr><td>Spring 2023</td><td>Signals & Systems</td><td style="color:green;text-align:center;">A-</td><td>Dr. Faisal Ahmed</td></tr>
                    <tr><td>Spring 2023</td><td>Microprocessors & Interfacing</td><td style="color:orange;text-align:center;">B+</td><td>Dr. Asad Naeem</td></tr>
                    <tr><td>Fall 2023</td><td>Computer Organization & Architecture</td><td style="color:green;text-align:center;">A</td><td>Dr. Bilal Shaikh</td></tr>
                    <tr><td>Fall 2023</td><td>Operating Systems</td><td style="color:green;text-align:center;">A-</td><td>Dr. Maryam Anwar</td></tr>
                    <tr><td>Fall 2023</td><td>Database Systems</td><td style="color:green;text-align:center;">A</td><td>Dr. Imran Siddiqui</td></tr>
                    <tr><td>Spring 2024</td><td>Computer Networks</td><td style="color
